#!/bin/bash

# Ottieni lo stato attuale di TLP (se è attivo o meno)
TLP_STATUS=$(systemctl is-active tlp)

# Ottieni il governor attuale della CPU tramite TLP
CURRENT_GOVERNOR=$(cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor)

# Mostra lo stato di TLP e il governor attuale in rofi
CHOICE=$(echo -e "Stato TLP: $TLP_STATUS\nGovernor attuale: $CURRENT_GOVERNOR\n----------\nModalità Risparmio Energetico\nModalità Bilanciata\nModalità Performance" | rofi -dmenu -i -p "Gestione Energia")

case "$CHOICE" in
    "Modalità Bilanciata")
        # Attiva modalità bilanciata usando TLP
        ;;
    "Modalità Risparmio Energetico")
        # Attiva modalità risparmio energetico usando TLP
        ;;
    "Modalità Performance")
        # Attiva modalità performance usando TLP
        ;;
    *)
        echo "Nessuna azione eseguita"
        ;;
esac

# Se TLP non è attivo, attiviamolo
if [ "$TLP_STATUS" = "inactive" ]; then
    echo "Attivando TLP..."
    sudo systemctl start tlp
else
    echo "TLP è già attivo"
fi
